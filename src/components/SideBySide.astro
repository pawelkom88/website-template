---
import type { EntryFieldTypes } from "contentful";
import { contentfulClient } from "../lib/contentful";
import "../styles/sideByside.css";
import { Image } from "astro:assets";

interface IntroModel {
  contentTypeId: "introSidebyside";
  fields: {
    title: EntryFieldTypes.Text;
    numberOfYears: EntryFieldTypes.Number;
    mainImage: ImageData;
    backgroundImage: ImageData | null;
    heading: EntryFieldTypes.Text;
    paragraph: EntryFieldTypes.Text;
  };
}

const introResponse = await contentfulClient.getEntry<IntroModel>(import.meta.env.CONTENTFUL_INTRO);

const {
  title,
  numberOfYears,
  mainImage: introMainImage,
  backgroundImage: introBackgroundImage,
  heading,
  paragraph,
} = introResponse.fields || {};

//@ts-ignore
const mainImageData = introMainImage?.fields;
//@ts-ignore
const backgroundImageData = introBackgroundImage?.fields;
---

<br />
<section id="sbsr-298">
  <div class="cs-container">
    <div class="cs-image-group">
      <div class="cs-box">
        <span class="cs-number">{numberOfYears}</span>
        <span class="cs-desc">{title}</span>
        <Image
          class="cs-box-picture"
          src={`https:${backgroundImageData?.file.url}`}
          alt={backgroundImageData?.description}
          width="521"
          height="672"
          aria-hidden="true"
        />
      </div>
      <Image
        class="cs-picture"
        src={`https:${mainImageData?.file.url}`}
        alt={mainImageData?.description}
        width="521"
        height="672"
        aria-hidden="true"
      />
    </div>
    <div class="cs-content">
      <span class="cs-topper">Who We Are</span>
      <h2 class="cs-title">{heading}</h2>
      <p class="cs-text">
        {paragraph}
      </p>
      <a class="cs-button-solid" aria-label="learn more about our programs" href="/about-us"
        >Learn More</a
      >
    </div>
  </div>
</section>
